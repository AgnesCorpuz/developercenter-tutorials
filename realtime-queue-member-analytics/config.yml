---
title: Realtime Queue Members Analytics
description: Use Notification API with Analytics API 
categories:
- Analytics
- Notification
steps:
- title: Introduction
  content: |
    This tutorial covers how to use Analytics API with Notification API. This sample code demonstrate how to get the number of active agents in a particular presence or routing status. For more information about queue query [visit this website](/api/rest/v2/analytics/queue.html). 

- title: Authentication
  content: |
    Authenticate with Genesys Cloud using OAuth Client credential grant. 

- title: Create a Notification Channel
  content: |
    Set up a notification channel and subscribe to the topic `{"id": "v2.routing.queues.{ queueID }.conversations"}`, estalish a persistent connection using a websocket.
    
    Each time a conversation is recieved on the queue, the recieved notification payload will be parsed to JSON. It is then checked if one of the participants array has a key value pair of `"purpose":"customer"`. If a value matches, a function to display what changed on the queue routing status and presence will be called.

- title: Display Analytics
  content: |
    When this function is called, the Analytics API(`POST /api/v2/analytics/queues/observations/query`) will display the routing status and presence of the members of the queue. 
    
    To learn more about Analytics API you may visit this link [here](/api/rest/v2/analytics/). 

languages: 
  python:
    displayName: Python
    steps:
    - file: "python/realtime-queue-members-analytics.py"
      highlight: "0-94"
    - file: "python/realtime-queue-members-analytics.py"
      highlight: "17-20"
    - file: "python/realtime-queue-members-analytics.py"
      highlight: "28-65"
    - file: "python/realtime-queue-members-analytics.py"
      highlight: "67-94"